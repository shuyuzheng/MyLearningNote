# Naming your package

## Requirements:
1. Only consist of letters, numbers and periods. (It's better not use _periods_, because it has confusing connotations)
2. Start with a letter.
3. Can _not_ end with a period.

## Strategies:
1. Check if a name is already used on CRAN by loading http://cran.r-project.org/web/packages/[PACKAGE_NAME]
2. Pick a unique name you can _easily Google_.
3. **Avoid** using both upper and lower case letters.
4. Find a word that evokes the problem and modify it so that it's unique. (knitr)
5. Use abbreviations. (Rccp)
6. Add an extra R. (stringr)

**Warning**: If you're creating a package that talks to a commercial service, check the **branding guidelines** to avoid problems down the line. (rDrop for Dropbox)

# Creating a package
## R studio:
File $\rightarrow$ New Project $\rightarrow$ New Directory $\rightarrow$ R package $\rightarrow$ Type the name of package $\rightarrow$ Create Project

## Command line in R:

```
devtools::create("path/to/package/pkname")
```

**Warning**: Don't use `package.skeleton()`, it will generate useless files and increasing your work.

# Primary skeleton
1. `R/` directory
2. `DESCRIPTION` file
3. `NAMESPACE` file
4. RStudio project file: `pkgname.Rproj`

## RStudio projects
Why use **project**:

1. Each project is isolated: code run in one project does not affect any other project.
2. You get handy code navigation tools like `F2` to jump to a function definition and `Ctrl + .` to look up function by name.
3. YOu get useful keyboard shortcuts for common package development tasks.

# Glossary
## RStudio project file
A text file contains the **Options** specific to the project.

## Life Cycle of a "Package"
1. **Source package**: the development version of a package. i.e. the directory on the developer's computer.
2. **Bundled package**: a package that's been compressed into a single file. (.tar.zg) `devtools::build()` 

Transform from "Source package" to "Bundle package"
* Vignettes (HTML and PDF file) replaced the "Markdown" or "LaTex" file.
* Temporary files are removed.
* Ignore the files listed in `.Rbuildignore`.
    * Use _Regex_ declare the files. (like, `^note$` for file "note" and `note` for files "notes.R", "important-notes.R", ect.)
    * `devtools::use_bild_ignore("filename")`: escaping the specific file "filename", without annoying _Regex_.

3. **Binary packages**: A single file (compressed from source package), used to distribute your package to an R user _without_ package development tools. (`devtools::build(binary = TRUE)`)

T transform from "Source package" to "Binary package":
* The `.R` files in `R/` directory are parsed into _three files_(`.Rdata`) with an efficiently formated functions. (Underlying works: loading all R code and then saving the functions with `save()`.)
* `Meta/` directory contains a number of `Rds` files which contain _cached metadata_ about package, like topics of the _help file_ and parsed versions of the `DESCRIPTION` file. (`readRDS()` can be used to see the contents.)
* AN `html/` directory contains files needed for _HTML help_.
* `src/` directory transform to `libs/` directory which contains the results of compiling 32 bit and 64 bit code.
* The contents of `inst/` are moved to the _top-level_ directory.

**Note**: Binary packages are **platform specific**

4. **Installed packages**: A _decompressed binary package_ in a package library.

Commands used to install packages:
* `R CMD INSTALL`: Source, bundle, binary.
* `devtools::install()`: a effective wrapper for `R CMD INSTALL`.
* `devtools::build()`: a wrapper for `R CMD build`. Turning source packages into bundles.
* `devtools::install_github()`, `devtools::install_url()`, `devtools::install_gitorious()`, and `devtools::install_bitbucket()`: 
    1. Downloads the _source package_ from internet (like GitHub).
    2. Run `build()` to make vignettes.
    3. Use `R CMD INSTALL` to do the install.
* `install.packages()`: download and install "Binary packages" or "Bundle packages" from CRAN.

5. **In memory packages**: the packages loaded into memory and ready for calling.

Functions for attaching and loading packages:
* **library()**: loading _installed_ packages to memory.
* **devtools::load_all()**: directly loading _source_ packages to memory.
* **Build & Reload**: Installing and then loading _source_ packages to memory.

## Library

Library is a directory containing installed packages. By default there are at least two libraries: 
* one for _recommended packages_ that come with every R installation (like base, stats, etc)
* one for _user-installed packages_.

`.libPaths()`: see which libraries are currently active.

Loading packages: 
* `library()`: Throws an _error_ if the package is not found.
* `require()`: prints a warning message and return `FALSE`.